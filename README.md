# Telegram -> Google Sheets automation (Webhook) (–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ú–•)

–ù–∞–±–æ—Ä –ø—Ä–æ—Å—Ç—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∏ —Ñ–∞–º–∏–ª–∏–∏ –≤ Google –¢–∞–±–ª–∏—Ü–µ
–Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–∫—Ü–∏–π –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö Telegram.

–õ–æ–≥–∏–∫–∞ (–∏—Ç–æ–≥–æ–≤–∞—è):
- –ò—â–µ–º –≤ —Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —à—Ç—Ä–∏—Ö–∫–æ–¥ (11-13 —Ü–∏—Ñ—Ä), –Ω–∞–ø—Ä–∏–º–µ—Ä: 37051624461
- –ï—Å–ª–∏ —É —Å–æ–æ–±—â–µ–Ω–∏—è –µ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏—è üëç -> —Å—Ç–∞—Ç—É—Å = "–ù–∞–π–¥–µ–Ω–æ"
- –ò–Ω–∞—á–µ –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏—è üëé -> —Å—Ç–∞—Ç—É—Å = "–ù–µ –Ω–∞–π–¥–µ–Ω–æ"
- –í –∫–æ–ª–æ–Ω–∫—É I –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ñ–∞–º–∏–ª–∏—é —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–∞–≤–∏–ª *–ø–æ—Å–ª–µ–¥–Ω—é—é* —Ä–µ–∞–∫—Ü–∏—é (–ª—é–±–æ–≥–æ —Ç–∏–ø–∞)
- –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –≤ –∫–æ–ª–æ–Ω–∫–µ G —Å—Ç–æ–∏—Ç "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ú–•"
- –°–∫–∞–Ω–∏—Ä—É–µ–º –≤—Å–µ –ª–∏—Å—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü–µ

----------------------------
## –°–æ—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞
- server.js           - Node.js webhook server (Express)
- package.json        - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- .env.example        - –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- apps_script.gs      - Google Apps Script –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
- config_example.json - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- README.md           - —ç—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

----------------------------
## –®–∞–≥–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

1. –°–æ–∑–¥–∞—Ç—å Telegram-–±–æ—Ç–∞ (BotFather)
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω.

2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Node.js webhook —Å–µ—Ä–≤–µ—Ä
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` -> `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
     - TELEGRAM_TOKEN
     - APPS_SCRIPT_URL (–≤—Å—Ç–∞–≤—å—Ç–µ URL –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Google Apps Script, —Å–º. –Ω–∏–∂–µ)
     - WEBHOOK_SECRET (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
     ```bash
     npm install
     ```
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ (–ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞):
     ```bash
     node server.js
     ```
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö–æ—Å—Ç–∏–Ω–≥ (Railway, Render, Replit) –∏ SSL (https).

3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Webhook —É Telegram
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å (–ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ TOKEN –∏ URL):
     ```
     https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://your-domain.com/webhook
     ```
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å–µ–∫—Ä–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-webhook-secret` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Å–µ—Ä–≤–µ—Ä–æ–º Apps Script.

4. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å Google Apps Script
   - –û—Ç–∫—Ä–æ–π—Ç–µ Google Drive -> New -> More -> Google Apps Script
   - –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `apps_script.gs`
   - –ó–∞–º–µ–Ω–∏—Ç–µ `SPREADSHEET_ID` –Ω–∞ ID –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã (–∏–∑ URL)
   - Deploy -> New deployment -> Web app
     - Execute as: Me
     - Who has access: Anyone (or Anyone with link)
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ URL (APPS_SCRIPT_URL) –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ `.env` / –∫–æ–Ω—Ñ–∏–≥.

5. –î–∞—Ç—å –±–æ—Ç—É –ø—Ä–∞–≤–∞ –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ —á–∞—Ç—ã
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –Ω—É–∂–Ω—ã–µ —á–∞—Ç—ã –∏ —Å–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∞–¥–º–∏–Ω–æ–º (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —á–∞—Ç–∞—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ä–µ–∞–∫—Ü–∏–∏ –∏ –±–æ—Ç –º–æ–∂–µ—Ç –∏—Ö –≤–∏–¥–µ—Ç—å.

6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç —Å —Ç–µ–∫—Å—Ç–æ–º —Å–æ–¥–µ—Ä–∂–∞—â–∏–º —à—Ç—Ä–∏—Ö–∫–æ–¥ `37051624461 / –ö—É—Ä—Ç–∫–∞...`
   - –ü–æ—Å—Ç–∞–≤—å—Ç–µ —Ä–µ–∞–∫—Ü–∏—é üëé —É —Å–æ–æ–±—â–µ–Ω–∏—è. –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∏—Ç update –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç POST –≤ Apps Script.
   - Apps Script –æ–±–Ω–æ–≤–∏—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Å –∫–æ–ª–æ–Ω–∫–æ–π G == "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ú–•" –∏ –∫–æ–ª–æ–Ω–∫–æ–π B == barcode.

----------------------------
## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –§–∞–º–∏–ª–∏–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏–∑ –¥–∞–Ω–Ω—ã—Ö –æ —Ä–µ–∞–∫—Ç–æ—Ä–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ —Ç–µ–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Telegram. –í —Ä–µ–¥–∫–∏—Ö —Å–ª—É—á–∞—è—Ö
  –∏–º—è –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å ‚Äî —Ç–æ–≥–¥–∞ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–æ "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ".
- –ï—Å–ª–∏ Telegram –º–µ–Ω—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç webhook-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –Ω–µ–±–æ–ª—å—à–∞—è –ø—Ä–∞–≤–∫–∞ `analyzeReactionsFromUpdate` –≤ server.js
- –ï—Å–ª–∏ —É –≤–∞—Å –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (PM2, Docker).

----------------------------
